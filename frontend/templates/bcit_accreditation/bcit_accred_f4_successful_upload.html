{% extends 'bcit_accreditation/base.html' %}

{% block title %}Upload Successful - BCIT Accreditation System{% endblock %}

{% block extra_css %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/form4.css' %}">
{% endblock %}

{% block content %}
<div class="f4container">
    <!-- Download Button Container -->
    <div class="download-button-container">
        <a href="{% url 'download_assessment' %}" class="download-button">Download Student Assessment Data File</a>
    </div>

    <!-- Success Message Container -->
    <div class="success-container">
        <h2>Upload successful</h2>
    </div>

    <!-- Home Button -->
    <div class="home-button-container">
        <a href="{% url 'home' %}" id="homeButton" class="home-button">Home</a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Clear form data but keep CSV file information
        sessionStorage.removeItem('f1FormData');
        sessionStorage.removeItem('f2FormData');
        sessionStorage.removeItem('f3FormData');
        
        // CSV file content is preserved for download
        
        // Add click handler for home button - clear CSV data when going home
        document.getElementById('homeButton').addEventListener('click', function() {
            // Clean up CSV data when returning to home
            sessionStorage.removeItem('csvFileName');
            sessionStorage.removeItem('csvFileContent');
            window.location.href = '{% url "home" %}';
        });
    });
</script>
{% endblock %}